package ui

import (
	"time"

	"github.com/rivo/tview"
)

type AlbumCarousel struct {
	container *tview.TextView
	app       *tview.Application
}

var frames = []string{
	`                           :=+#+:                              
               .::  .. -++++++######  .     :-                 
           ======++++++++++++ #######-:.=====***** .           
    ::::-==+====:++++++++++++ *+######:+==== +*****------      
    :::---++====:+.++++++++++ ##:#####=+==== ******--- ---     
   .::::-=++====.-+++++++++++ # ######=+==== ******-:-----     
   .::::-==+==  .++++++++++   ########:+==-  ******------      
   ..::::-:======++++++++++- +#######-::=====*****:--::::.     
     ...:::::::-==:::-.=++++++###### .-:::::=+:::::-::...      
         .:::::::::---..   :=+#+:     ----------::::.          
                   .::---------------::...                     
                       ..............                          
`,
	`                            :+#*                               
               :=+.  .  ++++++######+  .                       
            =====+++++ +++++++########..=====***** .           
    ::::---+==== -++++++++++++# ######:++====.*****-----       
    :::--.=++=== +++++++++++++########*+=====******-- --:      
   .::::-==++===.+++++++++++++# *#####*+=====******-=---:      
   .:::--=-+==-  ++++++++++   ########-+===  ******-=---       
    .::::-::=====+++++ +++++ =########::+====*****:--:::.      
     ...::..   :=+: .: :++++++######*.:--===-=-===--::..       
         .:::::::::---:.    :+#+.     :-:::::::::::..          
                   ..::--------------::..                      
                       ..............                          
`,
	`                                                               
                ===+++:    ++++++######                        
        --==  =====++++++ ++++++=####### :=====++++            
     ----:===+=====-++++++++++++.*#######+++++:*++++           
    .---- ===++====++ ++++++++++.## #####++=++-* +++=.         
    .----.===++====+:+++++++++++:# ######+==++:*++++=.         
    .---:-===+===  +++++++++++   ########+++:.=+++++ .         
    .  .--==: =====++++++ +++++:+#######--+++==++++  .         
     ..:::::-.  ===+++: : :++++++#####*::======----::.         
           .::------------==============--:::::::::..          
              ..........:::-----------:::.                     
                                                               
`,
	`                                                               
                 .===+****     +++++*****                      
        ---==== =++++=****** +++++++******-:====++++           
       -----===++++++  *****+++++++  *#****=====-++++          
     .-----====++++++ **+***+++++++ ##-****=====++++++.        
     .-----====++++++ *+****+++++++ *-#****=====++++++.        
     . --- ====++++   ******+++++   **#****===  +++++ .        
     .  ---==== ++++++****** +++++++******-:====++++  .        
      .::::::--:.:++++**** : ::+++++*****.:---------::.        
           ..::-------------==============--:::::....          
               .:::::::::::::::::::::::::::.                   
                                                               
`,
	`                                                               
                    -+++++*****.    .+++****                   
          =---==++ +++++++******* ++++++****** .---==-         
         -----=++++++++++ -****** ++++++*******=--.====        
       .------+++++++++++ ** ****+++++++**.****==- =.===       
       .=-----+++++++++++ *.******++++++*:*****=--.=====       
       . --=  +++++++++   ******* ++++  *******=- -==== .      
       .  =--=++++:+++++++******* ++++++****** :=--==-         
        :::------=-:=+++++*****:. : :+++****  .--:::::..       
         ....::::--==============--------------:..             
                 .::::::::::::::::::::.........                
                                                               
`,
	`                                                               
                   .  ++++++######  .   -++**-                 
           ====+++++ +++++++#####**-:++++++*****: .-=-         
        ..===++:*+++++++++++*:##****:+++++: *****-------.      
        :====+=+*:++++++++++##*#****++++++:******+---.---      
        :====++++*++++++++++# ##****++++++-******+-------.     
        : ===..+*++++++++   ####****-+++-  ******---=---..     
        :.:====+++++ +++++.+####***-:++++++*****: :-=-         
        .:--------==::++++++####** .:.  -++**-  ..::::...      
         .:::::::::--==============-------------::.            
                  .:::------------::::..........               
                                                               
`,
	`                           :=+*+.                              
               .::  .  =++++++######  .    .:-                 
           ======++++++++++++ #######.::+====***** .           
    ::::-==+====-++++++++++++ **#####*:++=== ******------      
    :::--:++====-+ ++++++++++ ## ####*+++=== ******--- ---     
   .::::-=++====:=+++++++++++ # #####*=++=== ******-:-----     
   .:::--==+==  :++++++++++   #######*:++=.  ******------      
    .::::-:======++++++++++- +#######:::+====*****:--::::.     
     ...:::::::-=-::-: =++++++###### .-:::::==::::::::...      
         .:::::::::---.    :=+#+.     ----------:::.           
                  ..::---------------::...                     
                       ..............                          
`,
}

func NewAlbumCarousel(app *tview.Application) *AlbumCarousel {
	box := tview.NewTextView().
		SetText(frames[0]).
		SetTextAlign(tview.AlignCenter)

	return &AlbumCarousel{
		container: box,
		app:       app,
	}
}

func (a *AlbumCarousel) CycleRight() {
	ticker := time.NewTicker(time.Second / time.Duration(24))
	defer ticker.Stop()

	for i := range frames {
		frame := frames[i]

		<-ticker.C

		a.app.QueueUpdateDraw(func() {
			a.container.SetText(frame)
		})
	}
}
